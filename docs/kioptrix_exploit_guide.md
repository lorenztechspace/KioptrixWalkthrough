# Walkthrough

<p align="center">
Launch Koiptrix VM (Target Machine) and Kali-Linux (Attacker Machine). Check the IP address of kali-linux using "ifconfig" <br/>
<img src="https://i.imgur.com/GKg39Or.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Start the network discovery for the target machine using the network address where the Kali-Linux is belong <br/>
<img src="https://i.imgur.com/ZH7Bjl4.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We can now see the devices within the network and we can see the possible IP of target machine <br/>
<img src="https://i.imgur.com/7rZQ3aM.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We can verify the IP address of Kioptriox by pinging any IP address from the Kioptrix machine <br/>
<img src="https://i.imgur.com/cNV9bMI.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Now that we identified the target IP address, We can now start scanning <br/>
<img src="https://i.imgur.com/3I1KGXO.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
NMAP results: <br/>
<img src="https://i.imgur.com/MHDR1O9.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />


<p align="center">
We notice 80 and 443 is open, let's investigate the HTTP/HTTPS by opening it in a web browser. There is a default webpage of Apache <br/>
<img src="https://i.imgur.com/LFlpaSo.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Try to open links like documentation <br/>
<img src="https://i.imgur.com/BT8fqP1.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
It show the version of Apache 1.3.20 <br/>
<img src="https://i.imgur.com/abLZfQy.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Scan the target machine using nikto for vulnerability scanning, We see some vulnerabilities like mod_ssl that we can use later to exploit <br/>
<img src="https://i.imgur.com/vGzGIAb.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Let's use dirbuster to enumerate directories <br/>
<img src="https://i.imgur.com/XWASjEh.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Enter the URL in the target URL <br/>
<img src="https://i.imgur.com/Am7TTx2.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Enter the URL in the target URL <br/>
<img src="https://i.imgur.com/Am7TTx2.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Click browse <br/>
<img src="https://i.imgur.com/30Gc0wP.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Go to base folder and open usr<br/>
<img src="https://i.imgur.com/gaREl9v.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Open share<br/>
<img src="https://i.imgur.com/oe7F9ts.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Open wordlists<br/>
<img src="https://i.imgur.com/TQn7ia6.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Open dirbuster<br/>
<img src="https://i.imgur.com/uxi2JUd.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Select “directory-list-2.3-small.txt”<br/>
<img src="https://i.imgur.com/JC148fp.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Start Scanning<br/>
<img src="https://i.imgur.com/ZAWoBfP.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Scan is running<br/>
<img src="https://i.imgur.com/0uDvZUI.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We can now see directories and we can explore and dig deep here to find useful information<br/>
<img src="https://i.imgur.com/z8xvWgd.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Open usage in browser<br/>
<img src="https://i.imgur.com/PqwFvUz.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We can see statistics on this page, we can see Webalizer Version 2.01<br/>
<img src="https://i.imgur.com/3YlzQlg.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Open metasploit<br/>
<img src="https://i.imgur.com/3Lc5wHg.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We have identified SMB as one of the open ports, We will try to find the version of it <br/>
<img src="https://i.imgur.com/unIqfHS.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We will scan the version using this module “use auxiliary/scanner/smb/smb_version” <br/>
<img src="https://i.imgur.com/BYqh0Ga.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We will scan the version using this module “use auxiliary/scanner/smb/smb_version” <br/>
<img src="https://i.imgur.com/BYqh0Ga.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Set RHOSTS <IP address of target machine> and run <br/>
<img src="https://i.imgur.com/rY6kXaR.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Results of the scan shows the version of SMB "Samba 2.2.1a" <br/>
<img src="https://i.imgur.com/Ajq0FrV.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Using the information we gathered, We will search the internet for possible exploits <br/>
<img src="https://i.imgur.com/tHoEdql.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/YXcIBoz.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/YXcIBoz.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/VzQNxVl.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/2hzGW3F.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/5XwtEhr.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/KjhBVHP.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/R5RHsDH.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
<img src="https://i.imgur.com/iu8aQeE.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Using searchsploit, we can search related to samba
<img src="https://i.imgur.com/Xe8Qeph.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />


<p align="center">
Using searchsploit Search samba 2.2 and run metasploit
<img src="https://i.imgur.com/dVZ4hOQ.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Using metasploit Search trans2open
<img src="https://i.imgur.com/Idh3GrJ.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Select module by using "Use 1" and set RHOSTS and showing options to review 
<img src="https://i.imgur.com/UK2FCzw.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Run the exploit, but it's not working<br />
<img src="https://i.imgur.com/6zdTY6B.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
We will change our payload to "linux/x86/shell_reverse_tcp
<img src="https://i.imgur.com/BVlaYas.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />

<p align="center">
Run the exploit and was able to establish command shell with root access :)
<img src="https://i.imgur.com/aFigurH.png" height="80%" width="80%" alt="KioptrixWalkthrough"/>
<br />
<br />
